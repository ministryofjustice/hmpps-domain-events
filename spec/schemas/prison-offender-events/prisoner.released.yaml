name: prison-offender-events.prisoner.released
title: prison-offender-events.prisoner.released
summary: A prisoner has been released from prison
description: |
  This event is raised when a prisoner is released from prison, this includes temporary releases
  such as court appearances and transfers. We would recommend consumers to ensure their service is idempotent,
  there are scenarios where multiple events maybe raised for same release.
contentType: application/json
payload:
  type: object
  required: [additionalInformation, description, eventType, occurredAt, personReference, publishedAt, version]
  properties:
    additionalInformation:
      type: object
      required: [currentLocation, currentPrisonStatus, details, nomisMovementReasonCode, nomsNumber, prisonId, reason]
      properties:
        currentLocation:
          type: string
          description: |
            enum  - indicates if prisoner is in or out of prison
            <ul>
              <li><b>IN_PRISON</b> prisoner in a prison</li>
              <li><b>OUTSIDE_PRISON</b> prisoner no longer in a prison</li>
              <li><b>BEING_TRANSFERRED</b> prisoner is being transferred</li>
            </ul>
          enum: [IN_PRISON, OUTSIDE_PRISON, BEING_TRANSFERRED]
          example: OUTSIDE_PRISON
        currentPrisonStatus:
          type: string
          description: |
            enum  - indicates if prisoner is still actively cared for by a prison, and alias for ACTIVE/INACTION
            <ul>
              <li><b>UNDER_PRISON_CARE</b> even if the prison is out of prison they are still attached to a prison and has not been discharged</li>
              <li><b>NOT_UNDER_PRISON_CARE</b> prisoner has been discharged from prison</li>
            </ul>
          enum: [UNDER_PRISON_CARE, NOT_UNDER_PRISON_CARE]
          example: NOT_UNDER_PRISON_CARE
        details:
          type: string
          description: Further human readable information about the reason. The contents is developer focused and not to be relied on.
          example: Movement reason code CR
        nomisMovementReasonCode:
          type: string
          description: |
            The reason code for the last movement. Since this is the literal NOMIS reference data that can change
            clients should be cautious of tightly integrating with this value. MOVE_RSN is the reference data domain in NOMIS
          example: CR
        nomsNumber:
          type: string
          description: Prison number of the prisoner
          pattern: '[A-Z][0-9]{4}[A-Z]{2}'
          example: A8513EA
        prisonId:
          type: string
          description: Three character Prison code
          pattern: '[A-Z]{3}'
          example: SWI
        reason:
          type: string
          description: |
            enum - reason for the release. Will be one of these values
            <ul>
              <li><b>TEMPORARY_ABSENCE_RELEASE</b> prisoner has been temporarily released and is expected to return</li>
              <li><b>RELEASED_TO_HOSPITAL</b> prisoner has been discharged in to the care of a hospital</li>
              <li><b>RELEASED</b> prisoner has been discharged, typically into the care of probation</li>
              <li><b>SENT_TO_COURT</b> prisoner has sent to court</li>
              <li><b>TRANSFERRED</b> prisoner is being transferred to another prison</li>
              <li><b>UNKNOWN</b> not sure why the prisoner has been released</li>
            </ul>
          enum: [TEMPORARY_ABSENCE_RELEASE, RELEASED_TO_HOSPITAL, RELEASED, SENT_TO_COURT, TRANSFERRED, UNKNOWN]
          example: RELEASED
    description:
      type: string
      const: A prisoner has been released from prison
    eventType:
      type: string
      const: prison-offender-events.prisoner.released
    occurredAt:
      type: string
      description: The date and time the event occurred
      format: date-time
      example: '2024-10-14T15:09:54+01:00'
    personReference:
      type: object
      required: [identifiers]
      properties:
        identifiers:
          type: array
          items:
            - type: object
              required: [type, value]
              properties:
                type:
                  type: string
                  const: NOMS
                value:
                  type: string
                  description: Prison number of the prisoner
                  pattern: '[A-Z][0-9]{4}[A-Z]{2}'
                  example: A8513EA
    publishedAt:
      type: string
      description: The date and time the event was published
      format: date-time
      example: '2024-10-14T15:10:54.742536797+01:00'
    version:
      type: integer
      description: Version of this event message. Currently 1
      example: 1
